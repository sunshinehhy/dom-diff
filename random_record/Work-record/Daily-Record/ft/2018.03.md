**2018.03.01**

1. 学习react-redux

/random_record/Web-knowledge/react/插件/React-Redux.md

分析实例React-Redux，学习React-Redux中的原理和用法；
学习到store、异步操作；
redux数据流传递

2. 总结几点vue和react之间的区别

3. 学习react 的context，不建议使用

明天任务：学习ReduxMiddleware、websocket和react，考虑订阅付费怎么实现，整理基础知识，晚上回去做rs。

**2018.03.02**

研究广告位的情况，自己用自己做的网址分析网站性能。
研究ios代码付费那块，用自己的语言组织出来。
周日先投，先找找看，
假如周一给电话，那周三或者周四去面试，根据需求。

使用setTimeout使第三方脚本在所有浏览器中被捕获到innerHTML中。
```
window.dolRand = Math.round(Math.random()*1000000);//定义slot随机数实现联动互斥功能
var slotStr=setDolphinSlot('USER_KV');

adid = deviceId + adChannelId + adPatternId + adPositionId;
data-ad-type和data-adPosition是一样的
广告adid + ': ' + adDescription
scrolling="no"
adDescription = deviceType + '-' + topChannelTitle + '-' + subChannelTitle + '-' + obj.pattern + '-' + obj.position;
```
iframe最好把样式写在iframe中，因为是外来文件

hm.baidu 是百度统计服务

PSI估计这个页面需要4次额外的往返，以加载呈现阻塞资源和0.2 MB来完全呈现。中值页面需要4次往返和2.7 MB。更少的往返次数和字节会导致更快的页面。

http://www.ftchinese.com/
来自Chrome用户体验报告的数据显示，该页面的中值FCP (1.2s)和DCL (2.2s)在所有页面的中间三分之一。这个页面具有很好的优化级别，因为它的资源很少是重新设置的。学习更多的知识。


First Contentful Paint (FCP) measures when a user sees a visual response from the page. Faster times are more likely to keep users engaged. DOM Content Loaded (DCL) measures when HTML document has been loaded and parsed. Faster times have been shown to correlate with lower bounce rates. We encourage you to look at a variety of metrics, including FCP and DCL to understand the performance of your page.
当用户看到页面上的视觉响应时，First Contentful Paint  (FCP)度量。更快的时间更可能让用户保持参与。当加载和解析HTML文档时 DOM Content Loaded (DCL) 度量。更快的时间被证明与较低的反弹率相关。我们鼓励您查看各种度量，包括FCP和DCL，以了解页面的性能。

The distribution of this page's FCP and DCL events, categorized as Fast (fastest third), Average (middle third), and Slow (bottom third).
该页面的FCP和DCL事件的分布，分类为快速(最快的三分之一)、平均(中间三分)和慢(倒数第三)。

PSI估计这个页面需要额外的0次往返负载渲染阻塞资源和0.4 MB的完全渲染。中值页面需要4次往返和2.7 MB。更少的往返次数和字节会导致更快的页面。

Lighthouse性能跟踪工具:https://developers.google.com/web/tools/lighthouse/

因果数缓冲出来是因为使用了js代码，当js代码没有快速运行就会出现卡顿现象。

请求：大部分时间都用于下载页面中的各种组件——图像、样式表、脚本、Flash等等。
减少http请求次数，加快地址，把js、css代码压缩，合并代码，简化页面设计。
是否存在一种既能使页面内容丰富，又可以加速响应时间的方案呢？

audits可以审计网站

1. 学习js放置位置
2. 学习document.write
3. 学习提高http请求几种方法
4. 用google的audit和page speed看性能
5. 研究图片懒加载
6. 梳理简历
7. 学习iframe
8. 用抓包工具
9. 研究广告开发

to do：投，学习

**2018.03.04**

reneg

明天汇报：付费订阅相关的页面基本上完成了，后面跟后端一起协作还得做一些相应修改，并且可能还有些bug需要测检查。

highchart.js，在需要放入的div中传入json数据，$('#container').highcharts(json);
检查response.result得出什么类型的值？

**2018.03.05**

后台怎么操作的：电子收据，传给服务器，存储信息，然后从后台传回是否支付的信息，这些信息包括：
登录状态才能购买
1. 学习chart项目，研究怎么跟踪用户信息，怎么从google中形成reporter
2. 学习ios付费流程
3. 汇报工作
公司业务简单，前后台业务简单，想接触更广的业务领域。接触功能不多，一些没实例过的功能或者接触过的功能，会自学总结。
简历改进：写上http协议、第一个项目第一句话需要更改

**2018.03.06**
```
    var paywallHintHtml = '<div class="subscribe-lock-container"><div class="lock-block"><div class="lock-content">使用FT中文网 iOS应用</div><div class="lock-content">成为付费会员，阅读FT独家内容</div><div class="subscribe-btn"><a style="color:white" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ft&" >下载应用▶︎</a></div></div></div>';

    String pid :产品id   1 
    String money：费用
    String uid：用户id  
    String title：购买内容
    ftjavacriptapp.payzfb(String pid,String money,String uid,String title)

    iapActions('paypid ', 'success');fail

```
安卓是把js文件放在哪里？这个函数是怎么定义的，我直接点击这网址就能读取到么？应该读取不到吧。
我看安卓是怎么传递的.
这段代码是怎么来的？我都没看过这个代码？
还得添加product-id，根据用户id绑定是否付费。难道是scheme？
付费成功，是返回什么？这个怎么控制？

web端和安卓端：
购买后能退货么？这个平台有试用期限么？
这个没有恢复购买一说？
self.webView.evaluateJavaScript(jsCode)中运行函数

公司使用的是CC视频。
一周精选有2个热门文章？
因为点击了iap-channel，
$('body').on('click', '.iap-channel', function(){}

思路：
在文章页中，点击立即订阅，进入订阅的页面，然后经过一系列付费动作。
displayProducts(window.iapProducts, iapAction, iapTitle);在这个函数中传入对应的几个值

应该把a注释掉，会运行click的动作，而不会运行a的href
购买成功后会有相应提示。
function updateProductStatus（）会更新对象中的键值。
function getViewPrefix() {这个函数是为了什么？}
<div id=storyview class=fullbodyView>是story页面的框
function showProductDetail（）应用在电子书
success、pending、fail包含membership

做的修改：
1. 注释掉index.html中的成为会员（ios webapp中有，需要注释掉，安卓中没有，更需要注释，吧应该在那上面测试）
2. 添加订阅会员，并把iap-channel改成paywall-channel

3. .subscribe-btn  a{} 变成 .subscribe-btn  span{}

4. <div class="subscribe-btn"><a style="color:white" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ft&" >下载应用▶︎</a></div>   
变成 <div class="subscribe-btn iap-channel" iap-action="membership" iap-title="会员"><span style="color:white">立即订阅▶︎</span></div>

5. production-id 加了时间

**2018.03.06**
修改地方：$pink-light: #f8ebda; 改为 $pink-light: #ffffff;

for (var x in subscribeIntruction)
{
   console.log('x:'+x + subscribeIntruction[x]);
}
iap-action="membership"
gNowView：

question：
1. 订阅到期是从订阅那天开始算么？
2. 续订给予怎么样的提示？
3. 当购买之后需要向后台传数据？这不需要后台知道有没购买，把购买信息传到后台么？支付宝能够返回有没购买成功？
4. 应该获取购买的那天，然后设置截止时间？当到期了，就更新状态（还需还得加）
5. 当购买成功了，是从后台返回数据么？allId.paywall === 1这是从json中读取到的数
安卓中购买成功后，把购买信息是存在哪里？success，
把是否购买的信息传给你，然后你把数据给我更新页面
需要更新页面的地方：首页、story、是否购买。
6. 已经订阅假如重装app，页面中的值还是更新的么？
7. iapHTMLCode在哪里显示？
8. 成功订阅后再点击会出现什么情况？触发的动作是什么？
9. 请求应该改在按钮上么？
10. iap-rail在哪里？
11. 要提示到期时间么？
12. userId是登录app中的，还是支付宝上的？
13. 怎么恢复购买？在哪恢复购买？

var viewPrefix = getViewPrefix();在membership中没有用到
注释：
function getViewPrefix() {
    var viewPrefix = '';
    if (gNowView.indexOf('storyview') >= 0) {
        viewPrefix = 'story-';
    } else if (gNowView.indexOf('channelview') >= 0) {
        viewPrefix = 'channel-';
    }
    return viewPrefix;
}

判断是什么页面用gNowView判断
storyview是哪个页面？
channelview是哪个页面？（订阅信息是属于channelview页面）

todo:
1. 研究hist是什么？
2. 


在哪检查用户id？

今天做的任务：
1. call
2. 调试订阅付费
3. 学习html5和css3
4. 学习es6

**2018.03.07**
1. 内容在后台做了缓存，是缓存到哪里啊？
2. 更新页面和付费状况，需要分别post么？
我觉得需要post 2次，第一次把付费情况post给后台，第二次从后台get数据更新后台数据。
提交的内容需要编码

汇报：
后台给了一个条件，进行锁更新，现在是默认已经付费状态。
在测试版本中做了页面，把post付费情况和get条件来更新页面的函数写好了，现在安卓能进行支付，等全部打通还得做各种测试。
要不看下现在效果，有什么意见，我再接着改。
在会议上把想问的问题问出来？

**2018.03.08**
1. 要是没有安装支付宝，会跳转到网页版
2. 点击第二个就一直显示支付失败，然后运行查看动作；估计把支付完成的id共享了，仅仅针对这个是否支付完？
3. 第一个点击订阅后，不会立马显示为已订阅
4. 因为id不会相同，所以不会执行相等条件

**2018.03.09**
    actionType一直是fail，应该从触发条件的地方修改？但这是为什么呢？
    失败之后应该初始化动作
    自动运行，我觉得是不是
思路：
1. 已经订阅的高级会员，才会变成现在升级，可以点击。如果是高级会员了，2按钮都不能点击。
怎么把是否付费状态传入这个界面，难道可以在url中传入参数。

**2018.03.12**
汇报: 在跟强哥一起调试安卓付费墙



**2018.03.13**

订阅页面UI更新思路：
如果支付（获取支付参数，应该是url中的参数传递么？），如果支付了普通用户，变成已订阅，
高级会员变成现在升级，
获取innerText值
假如订阅了普通会员、就可以订阅高级会员，高级会员可以点，普通会员不能点。
假如订阅了高级会员，2个按钮都变成已订阅。
premium=1&standard=0（判断2个）
premium=1&standard=1（仅仅判断一个）

直接硬include可以判断，先不用indexOf。

还有种思路：在每个按钮上写上是否付费的属性，根据属性判断哪个需要点击

todo：
考虑表格怎么自动生成，新建立一个项目

**2018.03.14**
todo:
1. 晚上完成react音频项目
2. 明天继续研究付费出现的问题
3. 看h5新知识

**2018.03.16**
今天完成任务：
1. 总结了symbol
2. 总结了Set和Map
3. 总结了跨域
4. 总结了解构赋值
5. 区分解构和扩展运算符

todo：
1. 学习react
2. 操作实例，总结node相关的函数

**2018.03.19**
汇报：跟强哥一起测试了安卓支付，并做了支付页面
需要先看下这页面吗，看哪里不合适我再更改。

**2018.03.20**
start-ibm.js
/frontend/tpl/include/script.html     flexlinks();

/frontend/tpl/include/header.html  <script language=javascript>theuser();</script>

/frontend/tpl/footer.html  引用了<%include file="next/partials/footer.html"%>

/frontend/tpl/include/navigation.html  引用了<%include file="include/navtool.html"%>

vip.html                  引用了<%include file="next/html/tag.html"%>
next/html/tag.html                    引用了<%include file="next/scripts/main.js"%>

修改：
/frontend/tpl/include/navigation.html
/frontend/tpl/next/partials/nav.html
include/navtool.html

todo:
1. 研究音频怎么播放的，记得没有中英文播放，那这个是怎么控制？
2. 页面先那样放吧，只想逻辑，定义一个变量，控制是premium、standard还是没有订阅？
用同一个变量不同的值控制不同的条件，明天使用case方法
加入没有订阅，引出提示，立即订阅。
3. 明天问下redmine怎么做？

**2018.03.21**
#FFF1E0;
$defaultPink: #FFF1E5;

@mixin headerContainer {
	background-color: $headerTint;
	color: $whiteColor;
}

theme-default  afternoonteaWithFT  luxury  ebook
$headerTint: #333;

#777
$footerBorder: #000;

.footer-container {
	font-size: 16px;
	@include headerContainer;
	border-top: 5px solid $footerBorder;
}

luxury :乐尚街
$whiteColor: #E0CDAC;

#b6a67f
#f5e4ce

todo:
编辑精选，是只能听中文音频，不能听英文，付费后才能听。
这个是应该有个链接吧，点进去之后，只能看中文，英文不能看，

svn info frontend/tpl/next/styles/main-luxury.css

**2018.03.23**

它的tag是什么？
学习定位
todo：
1. 先研究原生开发
2. 再研究缓存机制
3. 再研究定位
4. 研究http

question:
1. 公司缓存了多少东西，假如清缓存是把整个网站缓存都清理么
2. 强制清理缓存，那其它页面需要访问怎么办
3. 是否付费，能保存到cookie中或者localstorage中么


**2018.03.26**
XAMPP
不仅提交的时候，需要id，点击支付时候，也需要id，然后支付完成返回一个id号，
根据这个id号，与付费项的id号比较，如果相同就找到那个id，进行相应更新。

用了非简单请求，预检请求

非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为"预检"请求（preflight）。
xhrpw.setRequestHeader('Content-Type', 'application/text');是因为设置了这个才导致变成preflighted request吗？

我看到抓包请求头文件有：
"预检"请求用的请求方法是OPTIONS，表示这个请求是用来询问的。头信息里面，关键字段是Origin，表示请求来自哪个源。
服务器收到"预检"请求以后，检查了Origin、Access-Control-Request-Method和Access-Control-Request-Headers字段以后，确认允许跨源请求，就可以做出回应。
抓包中没有看到相应头信息？为什么

**2018.03.27**
汇报：
1. 网站颜色更新
2. 跟祥云和强哥一起调试前后台交互
3. 做web版会员中心页面和购买信息列表页

当点击立即订阅，就会运行getBuyCode()函数

左右margin要一样，可以设置padding左右不一样

记录：
1. web端订阅付费页面添加在微信中打开提示在浏览器中打开，添加cookie，添加ga
2. 付费订阅页面格式修改
3. webapp中添加登录提醒，并测试登录状态
4. paywall为1和2分别显示不同界面提示

todo：
1. 继续测试安卓版
2. 体检
3. 办事

max-height: 615px;
transition: max-height 0.25s ease,border-top 0.10s ease;

transition: max-height 0.25s ease,border-top 0.75s ease; (默认是这种)
max-height: 0;


问题：
uniqueVisitorId当登出的时候，没有退出

完成
1. 完成vip页面登录修改，添加判断cookie；把普通会员改成标准会员；把立即订阅改为成为会员
此页面有个问题，当没有登录，是进不了这个页面的。

2. 完成story页面把立即订阅成为会员；判断cookie

todo:
1. 订阅页面，获取cookie的行为
2. 修改safari打开逻辑

aria-* 是HTML5 新加的属性。
而aria-*的作用就是描述这个tag在可视化的情境中的具体信息。比如，

<div role="checkbox" aria-checked="checked"></div>

辅助工具就会知道，这个div实际上是个checkbox的角色，为选中状态。

**2018.03.30**
异步请求思路：
1. 把new Promise作为函数返回，直接调用此函数
2. 

todo:
1. 解决请求运行一次
2. q&a
3. 安卓界面更新
https://thoughts.teambition.com/workspaces/5cad86eb20f75300012d1aff/docs/5cb4493b20f75300012e6d5e#3e61fd-29

购买奖励是在哪里体现
从微信中分享进入是不能通过其他方式购买的吗？

coming soon 可以链接到 H5
某个板块好 banner 中链接到 H5，全灵的语文课各种介绍，配图
老用户给的折扣
跳转到 H5
app 登录到生活作风
在 cms 控制开关
分享进来进入

新用户跳到新链接，老用户跳到老链接。

配置 2 个链接
分享出去到专题链接，诶分析者打开页面再打开页面，会调起 app，并且会进入页面。

点击按钮判断是否登录，如果没有登录（登录信息给生活作风）
下 app 包，
点击判断新老用户，h5 活动配置
创建店铺，会生成 url
订单：包含小得到和大得到。分用户，不分店铺。
详细进生活作风。只放购买成功的商品，
罗辑思维，点击查看详情可以连接过去，
生活成功，是待发货状态，
右边点击进入第三方，生成订单。
调班，跨商品
注册过的老用户，不知道谁推荐的，是否购买
谁的链接。打开少年得到购买
邀请人，app 记录下来，一个事推荐人，一个是被推荐人
生活作风链接加上 userid
少年得到公众号，因为支付方式不一样。

显示与不显示，参与过就进入这个页面，
校验是否分享过
分享与失败
老版本不能用包管理
包管理是否会弹升级框，旧版本
banner 区分版本，1.4.6 以上弹框。
微信里下面登录，注册或登录（H5 有没有注册和登录），
专属码
登录之后下载或者去生活作风
放文字。精确到分秒，是否可操作，文字前端发版。
第四节课结束了就不能退。
只有老用户是 1999（只针对 1500 个），老用户分享出去，是否还是用 1999，待确定。
相同的可以买，只不过不能成功。一个 sku 跟班级挂钩，

可能进入 2 个页面，肯定得获取用户 id，返回肯定要刷新，因为下面按钮需要变化（也就是要作出请求）。这样我需要确定下
如果不用 doGet，返回 doLogin 函数中还是要加上请求数据（因为不会刷新页面），刚进入会调用 doLogin 但是从 H5 返回 H5 不会调用 doLogin

登录成功进来：不会执行 created

微信中打开的分享活动页

先获取数据结构，然后根据数据结构来点击
活动时间，监听倒计时来控制按钮变化
分享出去都是售卖页（这个根据老旧用户来）

需要给你传 userId 吗？登录成功之后需要请求来获取用户 id，并且倒计时。
因为要获取邀请记录，所以需要请求数据。

我出了一个文档，之前做【分享免费听】遗留的问题，希望此次能一起解决，
下午做下反述，并且一起讨论开发协作的事，开发方案，哪些地方需要联调，一起讨论下接口结构。一起确定下实现方案。（跟原生端交互的方式、服务器的数据结构）
为什么要升级呢？

## 需要问的问题

- 是先升级再登录？
- 生活作风

## 提测需要核对点

版本
二次分享链接
整个购买流程
刷新
返回不刷新，但是保留登录状态

let link =
"http://test1-3.igetcool.com/Active/chineseCourseSell?h5Pid=&shareSource=invitationDetail&appUserPid=262669207522111488&from=singlemessage&isappinstalled=0";
// link = link.replace(/shareSource=.+?(&|\$)/, ""); [\?|&]
link = link.replace(/shareSource=.+?&/g, "");

7-10 招生

猿辅导

<!-- <div class="common-for-bottom-bar only-one-btn" @touchmove.prevent>
      <div
        class="common-for-btn light-common-for-btn"
        v-if="!isInApp"
        @touchstart.stop="() => openIntroduce()"
      >打开app</div>
      <div
        class="common-for-btn light-common-for-btn"
        v-else
        @touchstart.stop="() => openIntroduce()"
      >打开介绍活动页</div>
    </div>-->

http://coolcdn.igetcool.com/t/1556276467000.png (调起分享)

http://coolcdn.igetcool.com/t/1556276526000.png (一年级购买)
http://coolcdn.igetcool.com/t/1556276558000.png（二年级购买）
http://coolcdn.igetcool.com/t/1556276540000.png (三年级购买)

http://coolcdn.igetcool.com/t/1556276578000.png（四年级购买）

http://coolcdn.igetcool.com/t/1556276597000.png（跳转到活动介绍页）

http://coolcdn.igetcool.com/t/1556276597000.png（跳转到活动介绍页）

http://coolcdn.igetcool.com/t/1556276624000.png（跳转到好礼页）

http://coolcdn.igetcool.com/t/1556276906000.png (invite_introduce_head@2x)

http://coolcdn.igetcool.com/t/1556277121000.png (invite_strategy@2x)

http://sh5.dev.didatrip.com/product/detail/?alias=4z12e0z9oqr7&tfrom=goods

if (isAPP) {
if (isAndroidApp) {
return "Android";
} else if (isIOSApp) {
return "IOS";
}
} else {
if (isWX) {
return "WX";
} else if (isQQ) {
return "QQ";
}
}

        let search = location.search.substring(1);
        let h5sharePid = "";
        if (search.match(/h5sharePid=(.*?)&/)) {
          h5sharePid = search.match(/h5sharePid=(.*?)&/)[1];
        }

## H5 域名汇总

开发环境：
内嵌页（inset）域名：test1-4.igetcool.com
请求域名（h5 分享域名）：test1-3.igetcool.com

测试环境：
内嵌页（inset）域名：test2-4.igetcool.com
请求域名（h5 分享域名）：test2-3.igetcool.com

线上环境：
内嵌页（inset）域名：igetcool-inset.igetcool.com
请求域名（h5 分享域名）：https://igetcool-share.igetcool.com

sh5.dev.didatrip.com/product/detail?alias=4yihd2ix4lcv&userId=190235644566573056&deviceType=1&device=93fffb769ad7a86a&token=e948ae69-fd05-420b-9d97-d71fb7adfe52&appUserAppAgent=VTR-AL00_26_8.0.0_HUAWEI&appVersion=1.5.1&appChannel=igetcool&sourceLink=http://test2-3.igetcool.com/Active/chineseCourseSell?h5Pid=100000000000000002&t=52&activityPid=327593288291700736

影响点：
为了埋点，涉及到调用原生分享弹窗的页面（包括分享免费听页、分享记录页、好礼邀请页、活动转介绍页）加了一行代码，影响范围如下：
是否能正常分享

**转介绍页**
1 http://coolcdn.igetcool.com/p/1557323645000.jpg

2 http://coolcdn.igetcool.com/p/1557323662000.jpg

3 http://coolcdn.igetcool.com/p/1557323682000.jpg

4 http://coolcdn.igetcool.com/p/1557323695000.jpg

5 http://coolcdn.igetcool.com/p/1557323705000.jpg

**售卖页**

1 http://coolcdn.igetcool.com/p/1557323767000.jpg  
2 http://coolcdn.igetcool.com/p/1557323816000.jpg
3 http://coolcdn.igetcool.com/p/1557323830000.jpg
4 http://coolcdn.igetcool.com/p/1557323842000.jpg
5 http://coolcdn.igetcool.com/p/1557323863000.jpg
6 http://coolcdn.igetcool.com/p/1557323897000.jpg
7 http://coolcdn.igetcool.com/p/1557323914000.jpg
8 http://coolcdn.igetcool.com/p/1557323937000.jpg
9 http://coolcdn.igetcool.com/p/1557323952000.jpg
10 http://coolcdn.igetcool.com/p/1557323969000.jpg
11 http://coolcdn.igetcool.com/p/1557323984000.jpg
12 http://coolcdn.igetcool.com/p/1557324007000.jpg
13 http://coolcdn.igetcool.com/p/1557324052000.jpg
14 http://coolcdn.igetcool.com/p/1557324072000.jpg
15
http://coolcdn.igetcool.com/p/1557324084000.jpg
16
http://coolcdn.igetcool.com/p/1557324097000.jpg
17
http://coolcdn.igetcool.com/p/1557324110000.jpg
18
http://coolcdn.igetcool.com/p/1557324122000.jpg
19 http://coolcdn.igetcool.com/p/1557324136000.jpg
20 http://coolcdn.igetcool.com/p/1557324151000.jpg
21
http://coolcdn.igetcool.com/p/1557324176000.jpg
22
http://coolcdn.igetcool.com/p/1557324192000.jpg

          // shareSource为了二次分享不携带分享来源
          // if (this.$route.query.shareSource) {
          //   link = link.replace(/shareSource=.+?&/g, "");
          // }

取消：http://coolcdn.igetcool.com/p/1558337515000.png
1 年级：http://coolcdn.igetcool.com/p/1558337576000.png

2 年级：http://coolcdn.igetcool.com/p/1558337598000.png
3 年级：http://coolcdn.igetcool.com/p/1558337616000.png
4 年级：http://coolcdn.igetcool.com/p/1558337632000.png
视频背景：http://coolcdn.igetcool.com/p/1558416880000.png
左边按钮（打开介绍页）：http://coolcdn.igetcool.com/p/1558419359000.png
立即报名：http://coolcdn.igetcool.com/p/1558419427000.png

tool1:
https://coolcdn.igetcool.com/t/5/21/2019c89c4caa2e25a2c7d62b2467958fe4bc.png
tool2:
https://coolcdn.igetcool.com/t/5/21/2019da2288253e2bf5cf12b83278a3193faa.png

introduce1:
https://coolcdn.igetcool.com/t/5/21/201937f7f3dd2bf259e8dfb76aa28fc0c6f6.png

https://coolcdn.igetcool.com/t/5/21/20196360cbb8bb44f99577e74d5f77d82995.png

work:

https://coolcdn.igetcool.com/t/5/21/2019f03f82039d4da438d5e600d583389bf9.png

https://coolcdn.igetcool.com/t/5/21/20197e61b3b06c5bef6ef3a2624af58ae91d.png

https://lanhuapp.com/web/#/item/project/board/detail?pid=7e748f13-521e-448b-9442-e4fed142ac71&project_id=7e748f13-521e-448b-9442-e4fed142ac71&image_id=f51731f9-a922-4c07-b0bb-ebb919bd7722

http://coolcdn.igetcool.com/p/1558583706000.png

tab 背景：http://coolcdn.igetcool.com/p/1558603505000.png

brew install autojump
.zsjrc
~
..
autojump
j h5
j live
j --start
j etc

<video> 标签的层级会变成 MAX 级别，无论如何设置 z-index，都会遮挡别的脱离文档流的元素

https://www.cnblogs.com/wisewrong/p/10276947.html （安卓微信浏览器 video 标签层级过高）

     x5-video-player-type="h5"

## 语文售卖第 4 期

1 http://coolcdn.igetcool.com/p/1559551235000.jpg
2 http://coolcdn.igetcool.com/p/1559551258000.jpg
3 http://coolcdn.igetcool.com/p/1559551270000.jpg
4 http://coolcdn.igetcool.com/p/1559551281000.jpg
5 http://coolcdn.igetcool.com/p/1559551294000.jpg
6 http://coolcdn.igetcool.com/p/1559551309000.jpg

转介绍按钮修改 04
http://coolcdn.igetcool.com/p/1559551332000.png

**2018.02.01**
1.研究首页模板
/dev_www/mobile_webroot/api/homecontent.html
/dev_www/mobile_webroot/api/homecontentwide.html
/dev_www/mobile_webroot/homecontent.html
/dev_www/mobile_webroot/homecontentwide.html
/dev_www/frontend/tpl/channel/phonetemplate.html
.\frontend\tpl\phone\nexthome.html
.\libs\application\models\nextmodel.php
2.测试订阅提示
3.学习eTag和页面发生过程
4.ios项目锁样式是从next中来的

to do：
1.在订阅提示后面添加广告（包括pc端和移动端）
2.对story针对微信和浏览器分别判断显示内容（仅仅pc端）
3.添加锁和不锁
4.添加editcookie插件

**2018.02.02**

1.完成添加锁和不锁
2.完成对story针对微信和浏览器分别判断显示内容
3.完成在订阅提示后面添加广告（包括pc端和移动端）

 $p == "" 执行获取旧$allstories
 <div id="coveranchor" class="toempty">——进入文章页
 <div class="list <%$listClass%>">——文章列表  list odd-item
 <%if $sc.type == "widget"%>
<div class="oneStory"><%include file="widgets/`$itemHeadline`"%></div>
这是什么时候执行？

<%assign var="b" value=0%>
<%foreach from=$p.sections item=section%>
    <%if $section.type == "block"%>
    <%if $b == 0%>
    <%assign var="l" value=0%>
        <%foreach from=$section.lists item=list%>

            <%foreach from=$list.items item=sc%>
            <%/foreach%>

        <%assign var="l" value=$l+1%>
        </div>
        <%/foreach%>
    <%assign var="b" value=$b+1%>
    <%/if%>
    <%/if%>
<%/foreach%>

<%$itemLinkStart%>为空？
思路：直接加上premium类，并且判断是否购买，加上class，现在仅仅是加上锁住的class。
先在测试上加上这个效果，然后加上判断 ，直接在内容中加判断，先自己加上一个变量，复制给一个变量
cover headline narrow-screen
在包含headline上的div中加上class，有type为premium的就加上，其它都是空，统一判断

<%foreach from=$list.items item=sc%>此处得到sc
<%foreach from=$allstories item=sc%>
每个包含sc的都得写一遍？有写一遍的方法么？js中能用smarty语言么？

var aLi = document.querySelectorAll('.headline');
var arr = $("#navList li[class='channel']")
var arr = $("#navList").find("li[class='channel']")

.oneStory .locked{display:none;}
.oneStory .unlocked{display:none;}

     max-width属性不包括填充，边框，或页边距！
宽屏加上宽屏class，窄屏不加class，或者display为none

<%if $sc.type == "premium"%>
        <%assign var="narrowLock" value="narrow-locked"%>
        <%assign var="wideLock" value="wide-locked"%>
    <%else%>
        <%assign var="narrowLock" value=""%>
        <%assign var="wideLock" value=""%>
    <%/if%>

    `$wideLock`
    <%$narrowLock%>
    `$narrowLock`
    <%$wideLock%>
    <%assign var="narrowLock" value=""%>
<%assign var="wideLock" value=""%>

**2018.02.05**
```
<div class="subscribe-lock-container">
    <div class="lock-block">
      <div class="lock-content">使用FT中文网 iOS应用
      </div>
      <div class="lock-content">成为付费会员，阅读FT独家内容
      </div>
      <div class="subscribe-btn"><a href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ft" target="_blank" id="open-app">下载应用▶︎</a></div>
    </div>
</div> 

<img src="http://static.ftchinese.com/img/pay-ali.jpg" />
<img src="http://static.ftchinese.com/img/pay-wxpay.jpg" />
<img src="http://i.ftimg.net/picture/6/000068886_piclink.jpg" />

//   $('body').on('click', '#to-pay', function () {
    // for(let j = 0; j < pays.length; j++){
    //     if(pays[j].checked == true){
    //         payWay = pays[j].value;
    //     }
    // }
    //满足2个条件：1.支付方式  2.会员类型
    // if (memberType==='高端会员' && payWay==='ali') {
    //     window.open('http://premium.ftacademy.cn/index.php/pay?offerId=8d5e7e72f12067991186cdf3cb7d5d9d');
    // }
    // if (memberType==='普通会员' && payWay==='ali') {
    //     window.open('http://premium.ftacademy.cn/index.php/pay?offerId=eb6d8ae6f20283755b339c0dc273988b');
    // }
    // if (memberType==='高端会员' && payWay==='wxpay') {
    //     window.open('#');
    // }
    // if (memberType==='普通会员' && payWay==='wxpay') {
    //     window.open('#');
    // }
    // $('#payment-page').empty();
//   });
//   $('body').on('click', '#payment-shadow', function () {
//       $('#payment-page').empty();
//   });
```
// 使用jquery异步方式可行，但是原生的id找不到，为null

1. 将订阅页面代码改成原生的
2. 打开startapp，添加id
3. 看公司网站
4. 分析百度地图页面
to do：回去学习react和看公司新闻，看笔记

**2018.02.06**
微信相关js代码，用于研究：
http://res.wx.qq.com/open/js/jweixin-1.2.0.js

**2018.02.07**

问题：类型不用改成paywall吧，并且首页锁的类型需要改变？story json值是通过paywal判断
首页也是需要判断是否付费、是否登录的啊，仅仅是在登录和付费情况下才会是解锁状态。
<%elseif $itemType === "widget"%>
针对付费文章会有paywall，付费文章、付费用户
paywall应该是写成0或者1，应该仅仅限制一个条件已经付费且登录就开放。
1. web首页锁与不锁
2. 移动端首页锁与不锁
3. 改变量
4. 改三角
5. startapp.html有个逻辑需要小调整，我已经强制改了，但是不严谨。
我们现在的文章访问路径是——http://域名/story/id，所以触发App的链接为ftchinese://story/id，这个没毛病
但是……Oliver在做App时，约定的访问付费内容的链接应该是
http://域名/premium/id，触发App的链接是ftchinese://premium/id，只有premium访问，才会盖上一个付费提示，如果用上面story访问，就木有，所以~~~startapp里最好有个脚本，判断域名里有/story/，就用ftchinese://story/...，域名里有/premium/，就用ftchinese://premium/...
这个做好后先别上传，告诉我，我还得让超哥改一下服务器域名指向，然后再上线

文章分两类，普通文章（story）和付费文章（premium）
目前都用.../story/ID打开，将来会分别用.../story/ID和.../premium/ID打开
如果文章类型不对，会强制跳转
甭管story还是premium页面，仍是以paywall为准
也就是
未付费，已付费未登录，是有付费墙的，既paywall=1
已付费且已登录的，没有付费墙，既paywall=0

以这个变量为准，就不会有premium的歧义，付费墙可拆可建，premium属性则不能随便切换


https://zh.wikipedia.org/zh/Unicode%E5%B9%BE%E4%BD%95%E5%9C%96%E5%BD%A2%E5%88%97%E8%A1%A8

http://app003.ftmailbox.com/index.php/jsapi/paywall

http://www.ftchinese.com/index.php/jsapi/paywall


// 获取包含item-headline的子项a
function getHeadlineA(ele,clsName){
    var classValue = ''
    var childNodes = ele.children;   //HTMLCollection
    for (let i = 0; i < childNodes.length; i++) {
      // 过滤出包含a的子节点，然后用过滤出的节点增加class
      if (childNodes[i].tagName.toLowerCase()=='a'){
        classValue = childNodes[i].tagName.toLowerCase()
        var aa = childNodes[i].className; 
        childNodes[i].className = aa+' '+clsName;
        <!--addClass(childNodes[i], clsName);-->
      }
    }
}; 

// 应该需要把user_id传给你吧，难道判断登录后，后台就能获得这个cookie？
// 根据类型判断哪篇是付费文章，从js中能获取类型么？
// 从pagemaker中获得的数据传入数据库，从数据库中读取，后台从数据库中不可能仅仅返回一个值，后台应该对每一个story返回一个值，然后进行判断
// 应该在模板中先是全部锁住，如果既登录又付费了，便把class替换掉

**2018.02.08**

http://backyard.corp.ftchinese.com/falcon.php/pagemaker/get/home/2018-2-8?172807
1. 查找多种类：class="item-inner
<div class="content-container"><div class="content-inner">  评论、数据新闻等无边
2. <%if $feedRepeatCheck == "yes"%>
<%foreach from=$itemsArray item=item%>
3. <%foreach from=$itemsArray item=item%>
<%assign var="itemTagLink" value="/channel/speedread.html"%> 定义itemTagLink、itemTag、itemImage、itemId的地方
4. <%if $feedRepeatCheck != "yes" || (($feedImage != "necessary" || $itemImage != "") && $list.feedItems>0 && $i<$list.feedItems && !in_array($itemId, explode(',',$itemIdsArray)))%>
定义自适应class
5. <div class="side-container"><div class="side-inner"> 右边内容
// headlineDiv为空，为什么？


完成工作：
1. 研究首页代码，并写出标记性代码，便于理解。
保存了代码。
2. 编写编辑需要的代码段，实现表格列表功能，并研究怎么在不使用外联方式实现自适应。想出都设为50%和用js写
保存了代码。
3. 调试出web端首页锁更新

todo：
1. 调试所有栏目的锁状态
2. 调试移动端锁状态
3. 修改startapp代码

**2018.02.09**
1. 学习股票知识
2. 在next中试es6
"babel-core": "^6.26.0",
"babel-preset-es2015": "^6.3.13",
"gulp-babel": "^7.0.1",
3. 学习promise
4. 学习各种函数和变量



**2018.02.12**

1. 把刷新动作改成setInterval
2. 学习route

var interval = setInterval(function(){
    payWall();
},3000);
setTimeout(function( ) {
    clearInterval(interval); 
}, 15000);

**2018.02.26**

学习js面试问题，
做前端简历
明天继续学习js面试问题和css知识，花2天时间

**2018.02.27**
工作汇报：
启动app页面、支付订阅页面、加锁样式、提示订阅遮挡界面
学习：
css面试问题
http缓存

to do:
1.整理resume，自己为resume提出多个问题，自问自答  2天
2.学习一个测试插件  2天
下周开始投递
http://www.linqing07.com/resume.html
**2018.02.28**

整理做的项目
给编辑做一个table，明天研究怎么实现上传excel文件
学习mocha
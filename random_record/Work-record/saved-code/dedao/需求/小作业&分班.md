http://test2-2.igetcool.com/courseMakeClass/workAndAnswerDetail?courseId=308385284685635584&chapterId=310176056418332672&scheduleId=310176564096888832&classId=308387988883447808  （cms有音频实例）

## 小作业
```
 let w = img.offsetWidth; 
 let zoomInWidth = w * 0.8;
 img.style.width = zoomInWidth + 'px';
```
## 题中题
http://wiki.luojilab.com/pages/viewpage.action?pageId=23092990  （题中题课中编辑）

https://note.youdao.com/share/?id=6d1ff3ded97eb39b0a3873e0cd8324f9&type=note#/  （题中题，有道云笔记）

https://www.processon.com/view/link/5bf6a7bfe4b08522106f30f3  （分班直播思维导图）
http://wiki.luojilab.com/pages/viewpage.action?pageId=23093497 （分班直播需求）
只有连线题：matchPid在里面。
添加和编辑接口有最新的。
以前：所有的题matchPid都在options里面，现在只有连线题的matchPid在options里面，其他的在外面，见 http://wiki.luojilab.com/pages/viewpage.action?pageId=23092990 （最新格式）。

目前需要做的事有三件：
1. 增加对旧形式选择题的支持
2. 统计页面
3. 编辑接口更改

## 2018.12.19
小程序需求评审：
 从大得到挑选出需要哪些接口，需要跟谁讨论确定吗？这个流程是什么？每次技术债确定需要一些讨论吗？（自己有些想讨论的问题，不是用问来确定，比如我这有个问题，要不放入技术债下次迭代吧。）我能一起参与进去吗？
其实现在每次迭代的时候，自己都会听，根据需要恰当的时候提一下。下次上线或者合并，让我来合一次吧。
问莹莹：需要改什么技术债，怎么确定。
问阿雪：
每次做什么都是他们讨论的，你们是一起讨论吗？

问别人你们小组开会会怎么安排工作，先让大家都了解这些然后安排工作吗？
怎么提高效率：快速的进入状态。下面都整理好，什么时候开会直接在下面写入工作计划，不需要在会上重新说。

这里只添加素材：
在小节那添加作业，当老师在审核作业的时候，只能查看，删除需要二次确认，如果页面没有刷新，点编辑后端需要校核是否到提交时间。
老师必须要开始
限制作业发布的时间，和老师可以操作发布。作业的提交时间。发布时间不一样，但是截至时间一样，在排期那设置
班主任点发布，弹出填截止时间。
如果只有点击发布，就不能删除，这边就不能删除。
截止时间根据班级走的。
改错别字没法改，这种课只能用一次，已经上过，
sku挂着时段和挂着班级。
教材和库是分开。
已经发布
发布之后只有编辑按钮，没有删除
编辑作业和添加作业，标题不限制字数，默认最少一条作业内容，
不需要提交时间
超过50个汉字，点点点
只有班主任能看到作业
提交时间是：时间段
已发布状态有4个按钮，在此基础上加上编辑。
查看是看作业详情。只是不能编辑（预览）。查看变成预览
小程序可以传参。
二维码只有
必须购买课程，跳到小作业，转发之后孩子能看到作业。
后端自动加到
cms多一个老师管理，老师就不需要再继续登录。
添加弹出一个二维码，一扫，得到老师的unitid，得到老师的昵称。点开，另一个人去点他，判断是不是老师，如果是老师
班级管理：添加老师，添加老师微信，班主任手机号码。
二维码内嵌一个作业id
分享成另一个地址，免登陆
再分享出去
进入需要用电话号码登陆，返回，直接出来当前
群管理是要看多个题
老师全都列出来，老师不让返回，学员可以返回到首页。
学员不能转发，老师可以转发，登录之后，没有付费就是空白。
添加作业，只能添加一个作业，删了之后可以重新添加

搜索只是这个班级
一页显示20个作业，
如果选了2种，后者会覆盖前者。
默认排序是按精选，没有精选是在下面。按精选作业时间（由近到远），没精选按提交作业时间（按作业提交时间，倒序）。
用户端：精选在上面，精选按点赞数
最后提交在下面。
时间排序：按照最早提交在上面（最新提交的在上面）
默认排序：
点赞排序：点赞数，按提交时间（最新提交的在上面）
评分排序：按评分，只展示有评分的，没评分不会在列表中显示
未评分排序：按提交顺序倒序（最新提交的在上面）
已完成作业：根据课程走的
默认暂开，点评和回复总数。
删除所有下面的内容
删除点评或者修改点评（只能点分数），老师是调用班主任名称，不需要头像。
取班主任老师名称，从cms进来的名称
精选一次发一次通知，点击头像或者名称会进入这个学生课程下的所有作业。

统计页面：总赞数：这条作业所有赞数。总点评数：仅仅是点评，修改和回复是不算的。完成率是四舍五入
明细：只针对提交的人，没提交的不展示。最后提交的在上面（按提交时间，属于倒序）。10条分页，导出表格 (不分页)
学生：可以修改自己写的作业
头像都可以进去所有作业。
提交了是亮的，没提交是灰的，按小节权重来排，
取得小节名称。针对已经创建的小节的权重排序。
作业名称还是小节名称？
小程序需要formid来发送通知，前100个，不停的跟新


取的是作业标题，备注去作业内容第一段。
只有被精选才发。取消和再次精选还发。
统计在课程入口
已经开课就不需要签到，已经开课就不能签到。
课程的出席率（小节和班级），往期包含这次。排序是按照平均出席率，需要导出。
是否签到，是否出席，答对几个，哪些没答，作业完成情况，出席时间（百家云吐给我们）
出席从百家云获得。

**跟产品确定点**
- 评分和点评中的任何一项被改都发通知
- 一个学生可以有几个班
- 截止时间到了，作业还能编辑

```
scrollCommentList(e){
      let commentItem1Id = document.getElementById('commentItem1');
      let target = e.target;
      // console.log('scroll'+target.scrollTop);//页面上相对于父滚动的高度
      // console.log(target.scrollHeight);//页面底部到顶部的距离，固定值为1038
      // console.log(target.clientHeight);//页面可视区域的高度，固定值为750
      // console.log(target.getBoundingClientRect().top);//元素顶端到网页顶端的距离，固定值为150
      // console.log(commentItem1Id.clientHeight);//，固定值153
      // console.log(commentItem1Id.offsetHeight);//，固定值153
      // console.log(commentItem1Id.scrollTop);//，固定值0
      // console.log(commentItem1Id.offsetTop);//距离上方或上层控件的位置，固定值90,253
      // console.log(commentItem1Id.getBoundingClientRect().top); //因为网上滚动，所以越来越小，相对于body顶部
      
    },
    /**
     * 点击一次滚动到指定位置就不能继续滚动（也就是滚动一次），获取元素到元素网页顶部的高度
     * 当点击id，获取右边对应id元素，然后获取相对窗口顶部的值，scrollTop小于
     * 当commentItem1Id.getBoundingClientRect().top大于commentContainer.getBoundingClientRect().top，则commentContainer.scrollBy(0,diff);
     * 否则，往下滚
     */
    scrollToVisibleView(e){
      
      let commentItem1Id = document.getElementById('commentItem1');
      let commentContainer = document.getElementById('commentContainer');
      // console.log('view'+commentItem1Id.offsetTop);
      // console.log(commentItem1Id.getBoundingClientRect().top);
      let diff = commentItem1Id.getBoundingClientRect().top - commentContainer.getBoundingClientRect().top
      // commentContainer.style.scrollTop = 253
      // this.$nextTick(() => {
        // commentItem1Id.style.scrollTop = 253
        // if(commentContainer.scrollTop<commentItem1Id.offsetTop){
          if(diff>0){
            commentContainer.scrollBy(0,diff);//这个有效果
          }else{
            commentContainer.scrollBy(0,diff);
            console.log('diff:'+diff);
          }
          
        // }
        
      // });
      // commentItem1Id.scrollIntoView();//这样元素顶部会与窗口顶部对齐（不是相对父类）
    }
```
```
  this.$nextTick(function () {
    let commentItem1Id = document.getElementById('commentItem1');  
    commentItem1Id.addEventListener("click", function (e) {
        console.log(e.target);
    },false);
  })
```

## 扩大图片

```
rotateLeftImg(e){
  e.stopPropagation();
  let target = e.target;
  let img = target.parentNode.nextElementSibling;
  this.leftCurrentAngle= (this.leftCurrentAngle-90)%360;
  img.style.transform = 'rotate('+this.leftCurrentAngle+'deg)';
},
rotatRightImg(e){
  e.stopPropagation();
  let target = e.target;
  let img = target.parentNode.nextElementSibling;
  this.leftCurrentAngle= (this.leftCurrentAngle+90)%360;
  img.style.transform = 'rotate('+this.leftCurrentAngle+'deg)'; 
  //   this.rightCurrentAngle= (this.rightCurrentAngle+90)%360;
    //   img.style.transform = 'rotate('+this.rightCurrentAngle+'deg)'; 
}
如果rightCurrentAngle和leftCurrentAngle分开，会出现当左再右（或者先右再左），会出现不连贯转动的现象
```
```
  initStyle(){
    let audios = document.getElementsByClassName('vue-audio');
    let progress = document.getElementsByClassName('progress-bar');
    if(progress.length>0){
      for(let i=0;i<progress.length;i++){
        let currentTime = audios[i].currentTime;
        let duration =  audios[i].duration;
        let percentage = parseInt(100 * (currentTime / duration));

        // let rangeId = progress[i].getAttribute("id");
        // let dotSelector = "#" + rangeId + "::-webkit-slider-thumb";
        // let dotValue = "{background-position: " + 0 + "% 50%;}";
        // let posSelector = "#" + rangeId + "::-webkit-slider-runnable-track";
        // let posValue ="{background: -webkit-linear-gradient(left, #FF7349 0%, #FF7349 " + percentage +"%, #DFE0E1 " + percentage + "%);}";
        // setStyle("player-pos" + rangeId, posSelector + posValue);
        // setStyle("player-dot" + rangeId, dotSelector + dotValue);

        seekTo(progress[i],percentage, true);

        console.log(audios[i].currentTime);
      }
    }  
  },
```
## 录音
```
<recorder :isShow="isShow" @hideRecord='hideRecord'></recorder>
<button @click="record">录音</button>
record(){
  this.isShow = true;
},
hideRecord(){
  this.isShow = false;
}
```
## 链接
https://bushu.jingdaka.com/HomeworkManagement/141061?courseCalendarId=4614762  （京打卡包含音频链接）

## Blob
application/json  
Blob(107134) {size: 107134, type: "image/jpeg"}
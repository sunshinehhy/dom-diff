留言，微信中没有写留言
我的留言：跳转到h5

留言：页面开发2天 + 联调1天
课程列表、语文课运营：页面开1天 + 联调1天
h5： 页面开发2天+联调1天

共8天

内部仿真域名和线上域名，王友刚

灵云1.2版本上线灰度。

需求链接 https://5b32dy.axshare.com/#g=1&id=7xiphu&p=%E9%A6%96%E9%A1%B5-%E8%AF%AD%E6%96%87%E8%AF%BE%E4%B8%93%E5%8C%BA

蓝湖：https://lanhuapp.com/web/#/item/project/board?pid=916bcd3f-6d07-4a02-9f05-cf462956abf8

需求分配脑图：https://naotu.baidu.com/file/a96cfa4ca8bc27ad4697fae62300f91e?token=62120d6d6a1e8b97

需求文档：http://wiki.luojilab.com/pages/viewpage.action?pageId=43170882 

交互思路：
1. 提交成功，直接退出页面，这个页面退出，h5调用客户端函数，然后页面再请求一次数据，这样会更新页面；
2. 提交错误，请重新再提交（客户端控制，弹出toast）；
3. 点击【写留言】弹出登录；
4. 检查下当tab盖在上面，用js函数检查是否能看到；
5. 确定需要传哪些参数给客户端
6. 

https://peachscript.github.io/vue-infinite-loading/zh/guide/start-with-hn.html  （vue-infinite-loading插件用法）

https://blog.csdn.net/weixin_34111790/article/details/88713495


骨架屏一屏就行，当往下滑，没有出现数据，就出现骨架屏

现在图片加了懒加载方式吗？滚动加载出来，然后使用分页功能。

js分页加载数据？js无限加载？

做课件的编辑器，可视化、拖拽



点击第一列出数据，点击查询调用接口

有3级，必须选中2级，
没有3级，没必要选中2级
检查是否有3级。


整个h5活动页，方便搜索；
h5活动方便搜索，那其他的不需要搜索吗？

h5活动页，点击查询，重头开始查询吗？


todo:
1. 添加是否联报课程字段
2. 确定价格

防抖动和节流用的是闭包知识：
都是防止出现昂贵的计算开销

throttle：创建一个节流函数，在 wait 秒内最多执行 func 一次的函数
debounce：创建一个防抖动函数。 该函数会在 wait 毫秒后调用 func 方法

https://keelii.com/2016/06/11/javascript-throttle/  （节流函数 throttle 详解）

https://cloud.tencent.com/developer/article/1514880  (常见js面试题)

https://cloud.tencent.com/developer/article/1059038 (JS 吸顶导航，告别“回到顶部”)


      // return new Promise(async (resolve) => {
      //   window.onPageResume = async () => {
      //     let pid = await getAppUserPid();
      //     resolve(pid);
      //   }

      // let commentJson =  {"name":"gotoNativePage","params":{"url":commentUrl},"callback":""}
      // if (env.isAndroidApp) {
      //   typeof DDAppWebView.IGC_Js2Native === 'function' &&
      //     DDAppWebView.IGC_Js2Native(JSON.stringify(commentJson));
      // } else if (env.isIOSApp) {
      //   typeof IGC_Js2Native === 'function' && IGC_Js2Native(JSON.stringify(commentJson));
      // }

          // handleScroll(){
    //   let screenHeight = window.screen.height;
    //   let draftHeight = document.querySelector('.leave-message-container').offsetTop
    //   let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
    //   if (scrollTop > draftHeight - screenHeight) {
    //     this.isRequestMessage = true;
    //     console.log('remove scroll',this.isRequestMessage);
    //     window.removeEventListener("scroll", this.handleScroll);
    //   }
    // },


    http://127.0.0.1:8888/api/topic/config/type.json?index=2&code=4,null   （paramName为空，paramCode为'0'）

    ```
    import { env, compareVersion } from "../utils";
import { jumpToLogin, getAppUserPid } from "../utils/app";

export default {
  data () {
    return {
      isNewVersion: true
    }
  },
  methods: {
    async checkVersionAndLogin(version) {
      let isOldVersion = compareVersion(env.appVer, version) < 0; 
      if (isOldVersion) {
        this.$msgBox.showMsgBox({
          hasAction: false
        });
        return;
      }
      let pid = await getAppUserPid();
      if (!pid) {
        jumpToLogin();
      }
      return pid
    }
  }
};

```

    /**
     * 如果进入页面，列表处于上面，请求一次
     * 进入页面，监听是否执行了inputMessageHandler，执行过就执行requestCommentList，关键是不知道是mounted执行还是infiniteHandler执行？
     */
        // 先执行if，再执行监听滚动，进来执行一次，所以this.isScroll肯定是默认值
    

   

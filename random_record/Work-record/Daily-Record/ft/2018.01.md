**2018.01.01**
reporter：优化next中的代码，每次build会一起build，gulp：copy会把文件都copy到2个地方，cms和dev_www

**2018.01.08**
1.下载c的笔记，每天研究一点，明天上午开始做ios下拉刷新提示功能，今天整理了思路，明天直接开始创建文件；
2.周末研究2个github在同一台电脑中的配置，用自己的电脑试。
3.问为什么要把ftc-header分开，服务器？
4.今天总结公司跨域问题
5.结合c思路研究story.js和广告流代码
6.从googl中记录下来广告跟踪情况
7.房地产网站制作
**2018.01.09**
1.研究面试题，学习etag，dns，各种层；
2.完成刷新提示功能，使用了线程嵌套线程；
3.学习音频播放react
**2018.01.10**
1.研究面试题，学习浮动、各种协议，经历过几层，请求经历的过程；提高网站访问速度；跨域知识
2.研究next代码
3.把page—maker从代码中分离
4.确定刷新提示样式
5.研究微信分享过程中，请求延迟的问题
6.跟帆总确定刷新效果
**2018.01.11**
1. 学习并以ftc-header为例实践了js测试
详见 learnForNewTech/js测试
2. 优化NEXT的一些请求的延迟加载
http://redmine.ftimg.net/issues/1788?next_issue_id=1786&prev_issue_id=1789
描述
在微信页面打开，及时页面加载成功，加载进度条也要等很长时间才能走完。微信浏览器要等待页面完全加载成功才允许分享。
用Charles抓包后，发现主要是三个请求非常缓慢导致了页面加载成功的延迟。
http://www1.ftchinese.com/log/new_log.php?id=001075788&adch=&tpages=61&ttimes=222&tzone=8&tcolor=32&sSize=375,667&refer=&vpage=http%3A//www.ftchinese.com/story/001075788&_uid=1515467976085-0
http://www.ftchinese.com/index.php/ft/hit/605805/84690056
http://uluai.com.cn/rcmd/col/event?rid=23ca&itemId=001075788&tp=1515467976860&url=http%3A%2F%2Fwww.ftchinese.com%2Fstory%2F001075788&action=8&value=001075371,001073538,001075820,001071115,001075808,001071017,001071272,001075509&ref=&rdm=a6ad426a859848b389a8f19ae8cd7a3a&pf=2&mrp=cc6e6c6e-be45-44bb-8764-4313be3ac195&tkn=326ac81a0e9975f601c953d0552d40ab
两个问题：
一是这三个请求都要延迟15秒以上，
二是这三个请求应该是异步的，和页面加载成功事情没关系。
结论：
    1. 要保证load和DomContentLoaded这两个事情同时发生，或者至少是中间没有间隔。
    2. 所有的涉及网络请求的代码（JS和HTML，尤其是img src）都要在settimeout里面运行，如果有一个例外，则所有的优化都会无效。
    3. 可以利用监控load和DomContentLoaded的代码来调试。
    https://mathiasbynens.be/notes/settimeout-onload

**2018.01.12**
1.总结es6的一些知识
2.跟帆总申请想做前端的工作
3.对比ADM后台commonJS和es6的知识

**2018.01.15**
1.backyard错误检查，为什么根据搜索的值，会定位到不同的地方
http://backyard.ftchinese.com/falcon.php/homepage/gettagstoryapi?tag=EditorChoice&133501
2.下拉刷新和没网情况下弹出不同的页面
3.开会说：上周完成任务、下周计划任务、阻碍没完成任务的理由
4.tag-manager  google里的东西导出来，include header，
把代码生成给对方
https://www.lynda.com/Google-Tag-Manager-tutorials/Google-Tag-Manager-V2-Essential-Training/168238-2.html

**2018.01.16**
一直学习tag manager
**2018.01.17**
1.跟帆总一起解决颜色bug
2.这三个是付费页面，也需要咱们这边设计，在它们之前应该是卫国以前做的那个会员政策展示页，点击不用Button之后跳转到这里，这里确定之后就到了支付宝支付平台了

高端会员
http://premium.ftacademy.cn/index.php/pay?offerId=8d5e7e72f12067991186cdf3cb7d5d9d

普通会员
http://premium.ftacademy.cn/index.php/pay?offerId=eb6d8ae6f20283755b339c0dc273988b

试用会员
http://premium.ftacademy.cn/index.php/pay?offerId=1b52c526b858eb9dd2c66da1c0b8f44d
3.跟超哥申请域名，测试tag manager

明天跟可心讨论：
1.进度条是显示点赞么，有个是什么上线？
2.评论怎么显示？web版是一直下拉显示，还是点进去查看评论
3.2个专栏分别是什么内容？
4.怎么实现自适应呢？
5.评论功能是跟现在一个后台么？需要做成接口的形式么？怎么做成接口的形式，可以新建立一个项目，然后npm install进来么？
评论的js可以共享，但是格式样式共享，颜色不共享。
6.如果是2个，看用什么class，如果是1个用什么class。s6  .M-half
only screen and (max-width: 980px) and (min-width: 691px)   .M-half
only screen and (max-width: 980px) and (min-width: 691px)   .M12
only screen and (max-width: 1220px) and (min-width: 981px)  .L4
only screen and (max-width: 690px) and (min-width: 491px)   .S6
only screen and (max-width: 490px)                          .P-half
only screen and (max-width: 490px)                          .P12
考虑为L6和M12和S12
half和6的区别？
half好像主要是针对文字大小和图片
.M6 {
    width: 50%;
    //@include doubleWidth;
}
.M-half {
    @include half;
    .item-tag, .item-time {
      display: none;
    }
}
@mixin half {
  font-size: 0.9em;
  .item-inner {
    padding-top: 0;   
  }
  .image {
    position: static;
    float:left;
    width: 115px;
    padding: 3px 6px 3px 0;
  }
  &.no-image .image {
    display: none;
  }
}

**2018.01.18**
https://backyard.ftchinese.com/pagemaker/page-maker.html?page=demo1
1.更改next-menbership 项目的gulpfile.js文件
2.跟可心讨论奔驰投票demo
3.宇分配pagemaker修复任务——今晚完成

**2018.01.19**
#ada59a
#3ca29985
98c3b7
#7cc1bb
'+colorStyle+'
 ###Error: You must supply options.name for IIFE bundles
 ###main.js:34 Uncaught ReferenceError: regeneratorRuntime is not defined      
 babel-polyfill 存在不存在会发生此错误
 ##3存在不存在会发生此错误TypeError: Path must be a string. Received undefined
 "babel-core"中包含babel-polyfill
 npm WARN babel-loader@6.4.1 requires a peer of webpack@1 || 2 || ^2.1.0-beta || ^2.2.0-rc but none is installed. You must install peer dependencies yourself.

    ,
    "plugins": ["external-helpers",
        ["transform-runtime", {
          "helpers": false,
          "polyfill": false,
          "regenerator": true,
          "moduleName": "babel-runtime"
        }]
     ]

  https://oia.zhihu.com/articles/33044150?fallback_url=https%3A%2F%2Foia.zhihu.com%2Farticles%2F33044150
  https://zhuanlan.zhihu.com/p/33044150?iam=f036e2d861dfe197ab603a5d37e148d4?utm_medium=social&utm_source=wechat_session
  zhihu://articles/33044150?fallback_url=https%253A%252F%252Foia.zhihu.com%252Farticles%252F33044150%253Ffallback_url%253Dhttps%25253A%25252F%25252Foia.zhihu.com%25252Farticles%25252F33044150
  itms-apps://itunes.apple.com/app/apple-store/id432274380

  **2018.01.21**
  1.存储gulpfile.js文档在/Users/huiyun/hhy/psnnzzstf/random_record/保存的代码文件/2018.01
  关于gulp scripts放在/Users/huiyun/hhy/psnnzzstf/random_record/要学习的技术任务/插件/常用插件.md
  2.调通运行html代码
  // if (dataPath ==='views/data/data.json'){ }
  3.因为是先运行，再运行
   .then(html => {  
      // 此处是development  
      if (process.env.NODE_ENV === 'production') {
      判断完再执行，所以出错
    碰到的问题：写成接口的函数，执行完build，才执行
    return loadJsonFile(dataPath)
    .then(data => {
      <!-- 此处development，执行完build，才执行，为什么呢？ -->
      console.log('inline--'+process.env.NODE_ENV)   
      return render(template, {
        products: data,
        env
      });
    })
  4.输出process.cwd()
  process.cwd()     ：/Users/huiyun/hhy/webproject/next-membership
  5.
        const dataPath = demo.data;
      let aa = loadJsonFile(dataPath)   //aa--[object Promise]
      const dataForHeader = await fs.readAsync(dataPath,'json');  //dataForHeader--[object Object],[object Object],[object Object]
      console.log(aa[1]+'aa--'+dataForHeader[1].image)
得到
      undefinedaa--http://i.ftimg.net/picture/6/000068886_piclink.jpg

**2018.01.23**
    <%assign var=breadcrum value="<a href=/channel/mba.html>FT商学院</a>"%>
<%assign var=autoadchannel value="NP_FT_Business_School"%>
<%assign var="adchannelID" value="1701"%>
<%assign var="topnav" value="management"%>
<%assign var="subnav" value="mba"%>
<%assign var="thirdnav" value=""%>
<%elseif preg_match("/leadership/is",$story.topic)%>

安装了app，在微信中，点击立即下载会打开app-store；但在浏览器中，点击立即下载会打开ft中文网
。
如果没有安装，点击立即下载都会进入app-store。

免费下载：/Users/huiyun/hhy/webproject/NEXT/app/templates/partials/QrCode.html
http://www.jb51.net/article/42513.htm   --css画三角形
思路：把按钮放在上面，或者都设置
把三角形和文字和为一个div，再统一放在一个div中，然后实现居中。
三角形相对于文字的父元实现position
不能相对相邻的，只能相对父元素

#faeadd

**2018.01.24**
frontend/static/img/open-safari-hint.jpg
?       frontend/static/img/pay-ali.jpg
?       frontend/static/img/pay-wxpay.jpg

<!-- Premium -->在smarty中，console.log中能显示，但是在页面中不会显示
1.查找ios分享的url
2.完成订阅选项页面
3.学习抓包用法
4.story页面中写入提示信息，已经传入线上
5.总结需要问的一些问题
6.总结css滚动到指定位置动作
明天任务：
1.研究story页面，传入id，生成链接，调通分享功能
2.订阅页面再调整

**2018.01.25**
1.保存立即订阅临时代码
<!--<button class="subscribe-btn">立即订阅▶︎</button>-->
      <button class="subscribe-btn"><a href="http://www.ftchinese.com/startapp.html?<%$story.id%>" >立即订阅▶︎</a></button>
        // @media only screen and (max-width: 690px) {
  //   .subscribe-lock-container{
  //    position:fixed;
  //    bottom: 0px;
  //  }
  // }
        // window.open('ftchinese://story/'+parameter); 
      // window.open('http://www.ftchinese.com/openinapp.html?id='+parameter); 
    2.在story页面中添加显示内容
    3.下载笔记

  **2018.01.26**

  1.完成支付页面的开发
  2.怎么把图片变成svg？
  3.https://oia.zhihu.com/articles/33044150?fallback_url=https%3A%2F%2Foia.zhihu.com%2Farticles%2F33044150

  ipad移动端有打开应用
  iphone移动端上没有打开应用
  safari和chrome浏览器直接打开没有打开应用

  打开应用：
zhihu://articles/33044150?fallback_url=https%253A%252F%252Foia.zhihu.com%252Farticles%252F33044150%253Ffallback_url%253Dhttps%25253A%25252F%25252Foia.zhihu.com%25252Farticles%25252F33044150

https://unpkg.zhimg.com/za-js-sdk@2.1.41/dist/zap.js

var o = document.querySelector(".OpenGuide-clickHintLink");
o.href = l；
如果o是a可以这样使用

需要完成的任务：
1.subscription.html页面
-- 取消支付
-- 会员类型
-- 跳转到支付包页面
-- 隐藏input
2.判断safari打开指示
-- ios和安卓设备打开不一样的东西
-- 打开app应用直接跳转到app store
1、右上角Safari字体加大（建议用代码）；
2、下载应用跳转到应用宝页面；
3、在不用终端和浏览器上的呈现逻辑（参考知乎）；
4、用Safari很快的启动应用的方式。
知乎是在微信中不能跳转，在qq中能启动，qq直接是由qq浏览器打开；
qq点立即下载直接跳转到下载页面，不会跳转到app。
所以，需要判断微信和qq，qq应该跟浏览器逻辑一样。qq浏览器不需要显示提醒safari打开。
目前逻辑qq浏览器打不开页面
3.打开多次，会push多次显示


http://premium.ftacademy.cn/subscription.html

  **2018.01.28**
输出undefined和‘undefined’
如果没下载保持在这页面，但是，页面不一样
c.fallback_url = encodeURIComponent(location.href), "ftchinese:/" + e + "?" + i.a.stringify(c)是进入弹出提示页面
https://oia.zhihu.com/articles/33044150?fallback_url=https://oia.zhihu.com/articles/33044150
https://oia.zhihu.com/articles/33044150?fallback_url=https%3A%2F%2Foia.zhihu.com%2Farticles%2F33044150
https://zhuanlan.zhihu.com/p/33044150?iam=5dc35299108f5c49b94306c7d9abc9c0?utm_medium=social&utm_source=wechat_session
https://zhuanlan.zhihu.com/p/33044150?iam=5dc35299108f5c49b94306c7d9abc9c0?utm_medium=social&utm_source=wechat_session&from=singlemessage&isappinstalled=0
下载链接是什么？
https://static.zhihu.com/hemingway/app.8e67dc4ddf61c3824b67.js   包含app内打开的动作

r = e.urlScheme,
s.a.createElement(h.BaseOpenInAppButton, {
        className: "GuideModal-openInAppButton",
        href: r,
        utm: o
    },

  **2018.01.29**

  现在逻辑也不对，不管有没安装app，只会第一次启动.
  问题：
  -- 如果已经登录返回约定的变量，这个变量是什么？
  -- 登录页面就是前端的登录链接吧，没有额外的登录页
  -- 登录成功返回订阅页，是怎么跳转的？
  -- 订阅成功页是什么页面？
  -- 怎么判断登录成功？
  -- 立即订阅那是显示订阅按钮还是app内打开？现在临时是app内打开，肯定是这个先上线，然后改为立即订阅。
  --  点击订阅提示内订阅按钮，前往订阅页？
  -- 订阅提示内的登录链接在哪？
  -- 肯定是先登录才能进入订阅页面吧？
1.完成story页面开发
2.研究location.hash
3.研究移动端代码
function loadHomePage(loadType) {}
function loadToHome(data, loadType) {
    $('#homecontent').html(data);
}
url: gStartPageTemplate + themi + dateStamp,
if (screenWidth >= 700) {
    gStartPageTemplate = '/index.php/ft/channel/phonetemplate.html?channel='+homeFileName+fullScreenAdPara+'&screentype=wide&';
} else {
    gStartPageTemplate = '/index.php/ft/channel/phonetemplate.html?channel='+homeFileName+fullScreenAdPara+'&';
}


  gApiUrl.a10001 = 'api/ea001.json';
  loadStoryData(data);
            saveoneday('', data);
            todaystamp = unixtochinese(lateststory, 0);
            //$('#homeload .right').html('<a class="button light-btn" onclick="refresh(true)">下载最新文章</a>');
            showDateStamp();

    function displaystoryNormal(theid, language, forceTitle) {
      $('#storyview .storybody').html(storyimage).append(allId.ebody);
      $('#storyview .storybody').html(storyimage).append("allId.ebody");//测试，在此处改英文
    }
$('#storyview .storybody').html('<div class=ce>' + ct + '</div>');
$('#storyview .storybody').html(storyimage).append(allId.cbody.replace(/<p>(<div.*<\/div>)<\/p>/g,'$1'));

<div class="subscribe-lock-container"><div class="lock-block"><div class="lock-content">使用FT中文网 iOS应用</div><div class="lock-content">成为付费会员，阅读FT独家内容</div><div class="subscribe-btn"><a href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ft" >下载应用▶︎</a></div></div></div>

var premiumHintHtml = '<div class="subscribe-lock-container"><div class="lock-block"><div class="lock-content">使用FT中文网 iOS应用</div><div class="lock-content">成为付费会员，阅读FT独家内容</div><div class="subscribe-btn"><a style="color:white" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.ft" >下载应用▶︎</a></div></div></div> ';

http://app003.ftmailbox.com/androidapp.html?premium=1#/story/001076114


  ```

    var premiumPara = getPremiumPara();
    function getPremiumPara(){
        var para = window.location.search.substring(1);
        console.log(para)
        return para;
    }
      if (premiumPara!==undefined || premiumPara!==''){
          premiumPara = premiumPara;
          console.log(premiumPara);
      }else{
          premiumPara = '';
          console.log("undefined");
      }
      theurl=premiumPara+'#/story/'+theid;

      if (premiumPara==='premuim=1'){
            $('#storyview .storybody').html(storyimage).append(premiumHintHtml);
        }else{
            $('#storyview .storybody').html(storyimage).append(allId.cbody.replace(/<p>(<div.*<\/div>)<\/p>/g,'$1'));
        }
    if (premiumPara==='premuim=1'){
            $('#storyview .storybody').html(premiumHintHtml);
        }else{
            $('#storyview .storybody').html('<div class=ce>' + ct + '</div>');
        }


     把if (premiumPara==='premuim=1'){条件换成if (allId.premium==='1'){
               "premium":"1",

  ```

  **2018.01.30**

      1.开发文章页展现。
      2.继续研究移动端代码，主要看怎么使用next项目下的文件
      to do:
      3.总结meta参数
      4.总结window.open和window.location
      5.总结不同浏览器之间的差别

  **2018.01.31**

  1.看孙宇给的任务概述，如果文章页已经登录过，订阅页面还需要判断还是否登录么？不过多层保护多层好处吧。
  2.学习head相关知识
 /psnnzzstf/random_record/Web-knowledge/HTML/head.md
  3.学习setTimeout和js运行机制
 /psnnzzstf/random_record/要学习的技术任务/前端性能优化/js运行机制和settimeout.md
  4.整理日记
  明天计划：
  - 测试tag-manager
  - 询问需要完成的任务
  - 学习es6知识
  - 学习打开第一个url会发生什么
